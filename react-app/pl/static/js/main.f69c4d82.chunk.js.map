{"version":3,"sources":["locale/init.ts","serviceWorker.ts","model/state.ts","utils/storage.ts","utils/constants.ts","utils/helpers.ts","hooks/model/findFullLine.ts","hooks/model/useModel.ts","hooks/model/findPath.ts","components/ColoredCell.tsx","components/BoardCell.tsx","components/Board.tsx","components/NextColors.tsx","components/_ui/Modal.tsx","components/_ui/icons/ic_build.svg","components/_ui/icons/ic_help.svg","components/_ui/icons/ic_leaderboard.svg","components/_ui/icons/ic_menu.svg","components/_ui/icons/ic_open.svg","components/_ui/icons/ic_refresh.svg","components/_ui/icons/ic_save.svg","components/_ui/icons/ic_settings.svg","components/_ui/icons/ic_undo.svg","components/_ui/icons/icons.ts","components/_ui/Icon.tsx","components/_ui/Button.tsx","components/game-over/GameOverModal.tsx","components/_ui/OkCancelModal.tsx","components/leaderboard/LeaderboardModal.tsx","components/leaderboard/LeaderboardSection.tsx","components/_ui/SegmentedControl.tsx","components/options/OptionsModal.tsx","components/options/OptionsSection.tsx","components/tutorial/TutorialModal.tsx","components/tutorial/TutorialSection.tsx","components/load-game/LoadGameModal.tsx","components/load-game/LoadGameSection.tsx","components/save-game/SaveGameModal.tsx","components/save-game/SaveGameSection.tsx","components/install-prompt/InstallPromptSection.tsx","components/locale-chooser/LocaleChooser.tsx","App.tsx","index.tsx"],"names":["languageDetector","LanguageDetector","i18n","use","initReactI18next","init","resources","en","translations","pl","fallbackLng","debug","ns","defaultNS","keySeparator","interpolation","escapeValue","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","StateType","dbPromise","openDB","upgrade","db","oldVersion","newVersion","tx","createObjectStore","keyPath","createIndex","objectStore","getAll","savedConditions","length","put","deleteObjectStore","isInTopScores","score","a","getAllFromIndex","IDBKeyRange","lowerBound","higherOrEqualScores","putScore","playerName","transaction","add","timestamp","Date","getTime","done","loadTopScoresDescending","scoresAscending","reverse","slice","clearAllScores","clear","loadCurrentGame","get","value","loadSavedGamesNames","getAllKeys","loadGame","name","persistGame","shouldShowInstallPrompt","delay","lastPromptDate","now","timestampMillis","newGame","options","type","gameState","range","n","start","result","Array","i","randomInt","min","max","intMin","Math","ceil","intMax","floor","random","ms","Promise","resolve","setTimeout","findFullLine","model","size","lineLength","addedBallPosition","color","goRight","rowStart","horizontal","_findFullLineStart","_findFullLine","goDown","columnStart","vertical","goRightDown","diagonal1","_getDiagonalCorner","goLeftDown","diagonal2","position","next","p","x","y","next_p","begin","end","subsequentCount","maxSubsequentCount","maxStart","push","useModel","initialState","colorsCount","showNextColors","fill","nextColors","Initial","useReducer","reducer","action","Waiting","selectedBall","path","fromPosition","toPosition","positionsToCheck","backWay","nextToCheck","visited","startingPosition","prevPositionOnPath","candidate","findPath","Moving","remainingPath","prevStepScore","prevStepModel","prevStepNextColors","handleBoardClicked","updatedBallPosition","updatedModel","fullLine","choosePositionsToAddNewBalls","calculateScore","Freeing","ballsToRemove","Adding","positionsYetToFill","obj","positionsToFill","predicate","_k","v","Object","keys","map","k","Number","filter","Error","newBallPosition","fullLines","some","line","allBallsToRemove","flatMap","chooseNextColors","updatedState","every","c","undefined","forEach","handleAnimationFinished","prevState","buildNewGame","nextBallsCount","maxColor","emptyPlaces","places","count","sliceLength","cumulativeSum","round","Direction","ColoredCell","selected","moveTo","fillNewValue","disappearing","className","classNames","renderContent","BoardCell","disabled","onClick","onAnimationFinished","t","useTranslation","useEffect","timeout","clearTimeout","cellClicked","useCallback","func","canInvoke","debounced","debounce","coordsLabel","coords","contentLabel","aria-label","Board","dispatch","onGameOver","isAnimating","nextPathPosition","isLastMove","nextPositionToAddBall","newBallColor","defaultValue","found","find","findKey","boardClicked","key","isSelected","isAddingNewBall","isDisappearing","includes","getAnimationDirection","nextPosition","up","down","left","right","NextColors","index","Modal","open","onRequestClose","title","priority","children","focusElement","contentRef","useRef","useState","lastActiveElement","setLastActiveElement","attemptFocus","element","focus","e","document","activeElement","current","focusFirstDescendant","childNodes","child","handleEscape","event","code","stopPropagation","addEventListener","removeEventListener","modalRoot","getElementById","ReactDOM","createPortal","role","aria-describedby","aria-modal","ref","_extends","assign","target","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","clipRule","d","_ref","svgRef","props","width","height","viewBox","ForwardRef","forwardRef","id","enableBackground","xmlSpace","icons","build","help","leaderboard","menu","refresh","save","settings","undo","Icon","glyph","IconComponent","Button","React","label","hideLabel","icon","variant","tabIndex","GameOverModal","isTopScore","setIsTopScore","setPlayerName","isTop","checkIfTopScore","handleInputChange","handleSave","handleRequestNewGame","handleClose","onChange","OkCancelModal","okLabel","onOk","onCancel","focusedButton","primaryButton","okButtonRef","cancelButtonRef","focusedRef","LeaderboardModal","scores","setScores","isConfirmationOpen","setConfirmationOpen","loadScores","allScores","clearScoresRequested","clearScoresConfirmed","handleConfirmationCancelled","handleRequestClose","toLocaleString","LeaderboardSection","showModal","isModalOpen","setModalOpen","handleRequestShowRanking","handleRankingClosed","SegmentedControl","selectedValue","sanitizeOption","option","toString","onSelect","PureComponent","SegmentedControlButton","buttonClicked","colorsOptions","MAX_COLORS_COUNT","sizesOptions","DEFAULT_BOARD_SIZE","OptionsModal","initialValue","onSubmit","setShowNextColors","setColorsCount","setSize","switchOptions","useMemo","handleSwitchChange","handleColorsCountChange","handleSizeChange","handleSubmit","estimatedScore","i18nKey","parent","OptionsSection","showOptions","setShowOptions","handleRequestShowOptions","handleOptionsClosed","handleOptionsSubmitted","TutorialModal","TutorialSection","setShowModal","handleRequestShowTutorial","handleModalClosed","LoadGameModal","onGameLoaded","savedGames","setSavedGames","games","loadData","handleGameChosen","LoadGameSection","openModal","closeModal","SaveGameModal","date","toISOString","substring","replace","gameName","setGameName","handleSaveClick","SaveGameSection","InstallPromptSection","installPromptEvent","setInstallPromptEvent","shouldShowModal","setShouldShowModal","showPrompt","checkConfig","handleInstallPrompt","handleCancel","persistLastInstallPromptDate","handleOk","prompt","toUpperCase","LocaleChooser","changeLanguage","lng","language","emptyNextColors","App","showGameOver","setShowGameOver","showLeaderboard","setShowLeaderboard","currentGame","restoreCurrentGame","persistCurrentGame","handleGameOver","handleGameOverModalClosed","closeBehavior","handleNewGameClick","handleUndoClick","handleGameLoadedFromStorage","isAddingFirstBalls","style","flexGrow","render","URL","process","href","origin","fetch","response","contentType","headers","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.f69c4d82.chunk.js","sourcesContent":["import i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport { initReactI18next } from 'react-i18next';\n\nimport en from './resources/en.json';\nimport pl from './resources/pl.json';\n\nconst languageDetector = new LanguageDetector();\n\ni18n\n  .use(languageDetector)\n  .use(initReactI18next)\n  .init({\n    // we init with resources\n    resources: {\n      en: {\n        translations: en,\n      },\n      pl: {\n        translations: pl,\n      },\n    },\n    fallbackLng: 'en',\n    debug: false,\n\n    // have a common namespace used around the full app\n    ns: ['translations'],\n    defaultNS: 'translations',\n\n    keySeparator: '.',\n\n    interpolation: {\n      escapeValue: false,\n    },\n  });\n\nexport default i18n;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export interface GameConditions {\n  size: number;\n  colorsCount: number;\n  showNextColors: boolean;\n}\n\nexport interface BaseState extends GameConditions {\n  lineLength: number;\n  score: number;\n  model: number[];\n  nextColors: number[];\n  prevStepScore?: number;\n  prevStepModel?: number[];\n  prevStepNextColors?: number[];\n}\n\nexport enum StateType {\n  Initial = 'initial',\n  Waiting = 'waiting_for_click',\n  Moving = 'moving_selected_ball',\n  Adding = 'adding_new_balls',\n  Freeing = 'freeing_full_row',\n}\n\nexport interface InitialState extends BaseState {\n  type: StateType.Initial;\n}\n\nexport interface WaitingState extends BaseState {\n  type: StateType.Waiting;\n  selectedBall: number; // -1 means no selection\n}\n\nexport interface MovingState extends BaseState {\n  type: StateType.Moving;\n  selectedBall: number;\n  remainingPath: number[];\n}\n\nexport interface AddingState extends BaseState {\n  type: StateType.Adding;\n  positionsToFill: { [position: number]: number };\n}\n\nexport interface FreeingState extends BaseState {\n  type: StateType.Freeing;\n  ballsToRemove: number[];\n}\n\nexport type State = InitialState | WaitingState | MovingState | AddingState | FreeingState;\n\nexport type BoardAction =\n  | { type: 'board_clicked'; position: number }\n  | { type: 'animation_finished' }\n  | { type: 'new_game'; options?: GameConditions }\n  | { type: 'load_game'; gameState: BaseState }\n  | { type: 'undo' };\n\nexport function boardClicked(position: number): BoardAction {\n  return { type: 'board_clicked', position };\n}\n\nexport function animationFinished(): BoardAction {\n  return { type: 'animation_finished' };\n}\n\nexport function newGame(options?: GameConditions): BoardAction {\n  return { type: 'new_game', options };\n}\n\nexport function loadGame(gameState: BaseState): BoardAction {\n  return { type: 'load_game', gameState };\n}\n\nexport function undo(): BoardAction {\n  return { type: 'undo' };\n}\n","import { openDB, DBSchema, IDBPDatabase, IDBPTransaction } from 'idb';\n\nimport { GameConditions, BaseState } from 'model/state';\nimport { HIGHEST_SCORES_LENGTH, INSTALL_PROMPT_INTERVAL_MS } from './constants';\n\nexport interface Score {\n  playerName: string;\n  score: number;\n  timestamp: number;\n}\n\nexport const CURRENT_GAME_KEY = 'CURRENT_GAME';\nexport const RECENT_PLAYER_KEY = 'RECENT_PLAYER_KEY';\nexport const PWA_LAST_INSTALL_PROMPT_DATE_KEY = 'PWA_LAST_INSTALL_PROMPT_DATE_KEY';\n\ninterface BoulesDB extends DBSchema {\n  scores: {\n    key: number;\n    value: Score;\n    indexes: { 'by-score': number };\n  };\n  currentGame: {\n    key: typeof CURRENT_GAME_KEY;\n    value: BaseState | GameConditions;\n  };\n  savedGames: {\n    key: string;\n    value: BaseState;\n  };\n  recentPlayer: {\n    key: typeof RECENT_PLAYER_KEY;\n    value: string;\n  };\n  pwaLastInstallPromptDate: {\n    key: typeof PWA_LAST_INSTALL_PROMPT_DATE_KEY;\n    value: number;\n  };\n}\n\nexport const dbPromise = openDB<BoulesDB>('boules-1', 3, {\n  async upgrade(db, oldVersion, newVersion, tx) {\n    switch (oldVersion) {\n      case 0: {\n        const store = db.createObjectStore('scores', {\n          keyPath: 'timestamp',\n        });\n        store.createIndex('by-score', 'score');\n        (db as IDBPDatabase).createObjectStore('gameConditions');\n        db.createObjectStore('savedGames');\n        db.createObjectStore('recentPlayer');\n      }\n      // eslint-disable-next-line no-fallthrough\n      case 1:\n        db.createObjectStore('pwaLastInstallPromptDate');\n      // eslint-disable-next-line no-fallthrough\n      case 2: {\n        db.createObjectStore('currentGame');\n        const savedConditions = await (tx as IDBPTransaction).objectStore('gameConditions').getAll();\n        if (savedConditions.length) {\n          await tx.objectStore('currentGame').put(savedConditions[0], CURRENT_GAME_KEY);\n        }\n        (db as IDBPDatabase).deleteObjectStore('gameConditions');\n      }\n    }\n  },\n});\n\nexport async function isInTopScores(score: number) {\n  if (score <= 0) {\n    return false;\n  }\n  const db = await dbPromise;\n  const higherOrEqualScores = await db.getAllFromIndex(\n    'scores',\n    'by-score',\n    IDBKeyRange.lowerBound(score),\n    HIGHEST_SCORES_LENGTH,\n  );\n  return higherOrEqualScores.length < HIGHEST_SCORES_LENGTH;\n}\n\nexport async function putScore(playerName: string, score: number) {\n  const db = await dbPromise;\n  const tx = db.transaction(['scores', 'recentPlayer'], 'readwrite');\n  tx.objectStore('scores').add({\n    playerName,\n    score,\n    timestamp: new Date().getTime(),\n  });\n  tx.objectStore('recentPlayer').put(playerName, RECENT_PLAYER_KEY);\n  await tx.done;\n}\n\nexport async function loadTopScoresDescending(): Promise<Score[]> {\n  const db = await dbPromise;\n  const scoresAscending = await db.getAllFromIndex('scores', 'by-score');\n  return scoresAscending.reverse().slice(0, HIGHEST_SCORES_LENGTH);\n}\n\nexport async function clearAllScores() {\n  const db = await dbPromise;\n  await db.clear('scores');\n}\n\nexport async function loadCurrentGame() {\n  const db = await dbPromise;\n  return db.get('currentGame', CURRENT_GAME_KEY);\n}\n\nexport async function persistCurrentGame(value: BaseState) {\n  const db = await dbPromise;\n  return await db.put('currentGame', value, CURRENT_GAME_KEY);\n}\n\nexport async function loadSavedGamesNames() {\n  const db = await dbPromise;\n  return db.getAllKeys('savedGames');\n}\n\nexport async function loadGame(name: string) {\n  const db = await dbPromise;\n  return await db.get('savedGames', name);\n}\n\nexport async function persistGame(name: string, state: BaseState) {\n  const db = await dbPromise;\n  return await db.put('savedGames', state, name);\n}\n\nexport async function loadRecentPlayerName() {\n  const db = await dbPromise;\n  return await db.get('recentPlayer', RECENT_PLAYER_KEY);\n}\n\nexport async function shouldShowInstallPrompt(delay: number = INSTALL_PROMPT_INTERVAL_MS) {\n  const db = await dbPromise;\n  const lastPromptDate = await db.get('pwaLastInstallPromptDate', PWA_LAST_INSTALL_PROMPT_DATE_KEY);\n  return !lastPromptDate || lastPromptDate + delay < Date.now();\n}\n\nexport async function persistLastInstallPromptDate(timestampMillis: number) {\n  const db = await dbPromise;\n  return await db.put(\n    'pwaLastInstallPromptDate',\n    timestampMillis,\n    PWA_LAST_INSTALL_PROMPT_DATE_KEY,\n  );\n}\n","export const NEXT_BALLS_COUNT = 3;\nexport const INITIAL_BALLS_COUNT = 5;\nexport const MIN_COLORS_COUNT = 5;\nexport const MAX_COLORS_COUNT = 9; // see colors array in ColoredCell.scss\nexport const DEFAULT_COLORS_COUNT = 7;\nexport const DEFAULT_SHOW_NEXT_COLORS = true;\nexport const DEFAULT_BOARD_SIZE = 9;\nexport const DEFAULT_LINE_LENGTH = 5;\nexport const HIGHEST_SCORES_LENGTH = 10;\nexport const INSTALL_PROMPT_INTERVAL_MS = 7 * 24 * 3600 * 1000;\n","declare type NumDict<T> = { [key: number]: T };\n\nexport function range(n: number, start: number = 0) {\n  const result = Array(n);\n  for (let i = start; i < n; i++) {\n    result[i] = i;\n  }\n  return result;\n}\n\nexport function includesAll<T>(arr: T[], values: T[]): boolean {\n  return values.every(val => arr.includes(val));\n}\n\nexport function findAllKeys<V>(\n  obj: NumDict<V>,\n  predicate: (key: number, value: V) => boolean,\n): number[] {\n  const keys = Object.keys(obj).map(k => Number(k));\n  return keys.filter(k => predicate(k, obj[k]));\n}\n\nexport function findKey<V, D extends number | undefined>(\n  obj: NumDict<V>,\n  predicate: (key: number, value: V) => boolean,\n  defaultValue: D,\n): D {\n  const keys = Object.keys(obj).map(k => Number(k));\n  const found = keys.find(k => predicate(k, obj[k]));\n  if (found === undefined) {\n    return defaultValue;\n  }\n  return found as D;\n}\n\n// min included, max excluded\nexport function randomInt(min: number, max: number): number {\n  const intMin = Math.ceil(min);\n  const intMax = Math.ceil(max);\n  return Math.floor(Math.random() * (intMax - intMin)) + intMin;\n}\n\nexport function delay(ms: number): Promise<void> {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve();\n    }, ms);\n  });\n}\n\nexport function debounce<T, R>(\n  func: (...args: T[]) => R,\n  delay: number = 300,\n): (...args: T[]) => R | void {\n  let canInvoke = true;\n  function debounced(...args: T[]) {\n    if (canInvoke) {\n      canInvoke = false;\n      setTimeout(() => {\n        canInvoke = true;\n      }, delay);\n      return func(...args);\n    }\n  }\n  return debounced;\n}\n\nexport function currentDateFormatted(): string {\n  // returns current date in format YYYY-MM-DD_HH:mm eg.: 2019-08-02_1040\n  return new Date()\n    .toISOString()\n    .substring(0, 16)\n    .replace('T', '_')\n    .replace(':', '');\n}\n","export default function findFullLine(\n  model: number[],\n  size: number,\n  lineLength: number,\n  addedBallPosition: number,\n): number[] | null {\n  const color = model[addedBallPosition];\n\n  const goRight = (i: number) => i + 1;\n  const rowStart = addedBallPosition - (addedBallPosition % size);\n  const rowEnd = rowStart + size - 1;\n  const horizontal = _findFullLineStart(model, rowStart, rowEnd, goRight, color, lineLength);\n  if (horizontal >= 0) {\n    return _findFullLine(model, horizontal, goRight);\n  }\n\n  const goDown = (i: number) => i + size;\n  const columnStart = addedBallPosition % size;\n  const columnEnd = columnStart + (size - 1) * size;\n  const vertical = _findFullLineStart(model, columnStart, columnEnd, goDown, color, lineLength);\n  if (vertical >= 0) {\n    return _findFullLine(model, vertical, goDown);\n  }\n\n  const goLeftUp = (i: number) => i - size - 1;\n  const goRightDown = (i: number) => i + size + 1;\n  const leftTop = _getDiagonalCorner(addedBallPosition, size, goLeftUp);\n  const rightBottom = _getDiagonalCorner(addedBallPosition, size, goRightDown);\n  const diagonal1 = _findFullLineStart(model, leftTop, rightBottom, goRightDown, color, lineLength);\n  if (diagonal1 >= 0) {\n    return _findFullLine(model, diagonal1, goRightDown);\n  }\n\n  const goRightUp = (i: number) => i - size + 1;\n  const goLeftDown = (i: number) => i + size - 1;\n  const rightTop = _getDiagonalCorner(addedBallPosition, size, goRightUp);\n  const leftBottom = _getDiagonalCorner(addedBallPosition, size, goLeftDown);\n  const diagonal2 = _findFullLineStart(model, rightTop, leftBottom, goLeftDown, color, lineLength);\n  if (diagonal2 >= 0) {\n    return _findFullLine(model, diagonal2, goLeftDown);\n  }\n\n  return null;\n}\n\nfunction _getDiagonalCorner(position: number, size: number, next: (p: number) => number): number {\n  let p, x, y;\n  let next_p = position;\n  do {\n    p = next_p;\n    next_p = next(next_p);\n    y = next_p % size;\n    x = (next_p - y) / size;\n  } while (x >= 0 && y >= 0 && x < size && y < size);\n  return p;\n}\n\nfunction _findFullLineStart(\n  model: number[],\n  begin: number,\n  end: number,\n  next: (i: number) => number,\n  color: number,\n  lineLength: number,\n) {\n  let subsequentCount = 0;\n  let maxSubsequentCount = 0;\n  let start = begin;\n  let maxStart = begin;\n  let i = begin;\n  while (true) {\n    if (model[i] === color) {\n      subsequentCount++;\n      if (subsequentCount > maxSubsequentCount) {\n        maxSubsequentCount = subsequentCount;\n        maxStart = start;\n      }\n    } else {\n      subsequentCount = 0;\n      start = next(i);\n    }\n    if (i === end) {\n      break;\n    }\n    i = next(i);\n  }\n  if (maxSubsequentCount >= lineLength) {\n    return maxStart;\n  }\n  return -1;\n}\n\nfunction _findFullLine(model: number[], start: number, next: (i: number) => number): number[] {\n  const result = [];\n  let i = start;\n  while (model[i] === model[start]) {\n    result.push(i);\n    i = next(i);\n  }\n  return result;\n}\n","import { useReducer } from 'react';\n\nimport {\n  AddingState,\n  BaseState,\n  BoardAction,\n  FreeingState,\n  GameConditions,\n  InitialState,\n  MovingState,\n  State,\n  StateType,\n  WaitingState,\n} from 'model/state';\nimport { findAllKeys, randomInt, range } from 'utils/helpers';\nimport {\n  DEFAULT_BOARD_SIZE,\n  DEFAULT_COLORS_COUNT,\n  DEFAULT_LINE_LENGTH,\n  DEFAULT_SHOW_NEXT_COLORS,\n  INITIAL_BALLS_COUNT,\n  MAX_COLORS_COUNT,\n  NEXT_BALLS_COUNT,\n} from 'utils/constants';\nimport findPath from './findPath';\nimport findFullLine from './findFullLine';\n\nexport function useModel() {\n  const initialState = init();\n  return useReducer(reducer, initialState);\n}\n\nfunction reducer(state: State, action: BoardAction) {\n  if (action.type === 'board_clicked' && state.type === StateType.Waiting) {\n    return handleBoardClicked(state, action.position);\n  }\n  if (action.type === 'animation_finished' && state.type !== StateType.Waiting) {\n    return handleAnimationFinished(state as MovingState | AddingState | FreeingState);\n  }\n  if (action.type === 'new_game') {\n    return buildNewGame(state, action.options);\n  }\n  if (action.type === 'load_game') {\n    return {\n      ...action.gameState,\n      type: StateType.Waiting,\n      selectedBall: -1,\n    } as WaitingState;\n  }\n  if (\n    action.type === 'undo' &&\n    state.type === StateType.Waiting &&\n    state.prevStepModel &&\n    state.prevStepNextColors\n  ) {\n    return {\n      ...state,\n      score: state.prevStepScore || 0,\n      model: state.prevStepModel,\n      nextColors: state.prevStepNextColors,\n      prevStepModel: undefined,\n      prevStepNextColors: undefined,\n      selectedBall: -1,\n    };\n  }\n  return state;\n}\n\nexport function init(size: number = DEFAULT_BOARD_SIZE): InitialState {\n  return {\n    size,\n    lineLength: DEFAULT_LINE_LENGTH,\n    colorsCount: DEFAULT_COLORS_COUNT,\n    showNextColors: DEFAULT_SHOW_NEXT_COLORS,\n    score: 0,\n    model: new Array(size * size).fill(0),\n    nextColors: new Array(NEXT_BALLS_COUNT).fill(0),\n    type: StateType.Initial,\n  };\n}\n\nexport function buildNewGame(prevState: BaseState, options?: GameConditions): AddingState {\n  const { size, colorsCount, showNextColors } = options || prevState;\n  const emptyState: BaseState = {\n    lineLength: prevState.lineLength,\n    size,\n    colorsCount,\n    showNextColors,\n    score: 0,\n    model: new Array(size * size).fill(0),\n    nextColors: chooseNextColors(colorsCount, INITIAL_BALLS_COUNT),\n  };\n  return choosePositionsToAddNewBalls(emptyState);\n}\n\nexport function chooseNextColors(colorsCount: number, nextBallsCount: number = NEXT_BALLS_COUNT) {\n  const maxColor = Math.min(colorsCount, MAX_COLORS_COUNT) + 1;\n  return range(nextBallsCount).map(() => randomInt(1, maxColor));\n}\n\nexport function choosePositionsToAddNewBalls(state: BaseState): AddingState {\n  const emptyPlaces: number[] = [];\n  state.model.forEach((value, position) => {\n    if (value === 0) {\n      emptyPlaces.push(position);\n    }\n  });\n\n  let places = [];\n  const count = state.nextColors.length;\n  if (emptyPlaces.length <= count) {\n    places = emptyPlaces;\n  } else {\n    const sliceLength = emptyPlaces.length / count;\n    places = range(count).map(x => emptyPlaces[randomInt(x * sliceLength, (x + 1) * sliceLength)]);\n  }\n\n  const positionsToFill = {} as { [position: number]: number };\n  places.forEach((position, i) => {\n    positionsToFill[position] = state.nextColors[i];\n  });\n\n  return {\n    ...state,\n    type: StateType.Adding,\n    positionsToFill,\n  };\n}\n\nexport function handleBoardClicked(\n  state: WaitingState,\n  position: number,\n): WaitingState | MovingState {\n  if (state.model[position]) {\n    if (state.selectedBall === position) {\n      return {\n        ...state,\n        selectedBall: -1,\n      };\n    }\n    return {\n      ...state,\n      selectedBall: position,\n    };\n  }\n  if (state.selectedBall >= 0) {\n    const path = findPath(state.selectedBall, position, state.model, state.size);\n    if (path === null) {\n      return {\n        ...state,\n        selectedBall: -1,\n      };\n    }\n    return {\n      ...state,\n      type: StateType.Moving,\n      remainingPath: path,\n      prevStepScore: state.score,\n      prevStepModel: [...state.model],\n      prevStepNextColors: [...state.nextColors],\n    };\n  }\n  return state;\n}\n\nexport function handleAnimationFinished(state: MovingState | AddingState | FreeingState): State {\n  if (state.type === StateType.Moving) {\n    const [updatedBallPosition, ...remainingPath] = state.remainingPath;\n    const updatedModel = [...state.model];\n    updatedModel[updatedBallPosition] = updatedModel[state.selectedBall];\n    updatedModel[state.selectedBall] = 0;\n    if (remainingPath.length > 0) {\n      return {\n        ...state,\n        model: updatedModel,\n        remainingPath,\n        selectedBall: updatedBallPosition,\n      };\n    } else {\n      const fullLine = findFullLine(\n        updatedModel,\n        state.size,\n        state.lineLength,\n        updatedBallPosition,\n      );\n      if (fullLine === null) {\n        return choosePositionsToAddNewBalls({\n          ...state,\n          model: updatedModel,\n        });\n      } else {\n        return {\n          ...state,\n          model: updatedModel,\n          score: state.score + calculateScore(fullLine.length, state),\n          type: StateType.Freeing,\n          ballsToRemove: fullLine,\n        };\n      }\n    }\n  }\n  if (state.type === StateType.Adding) {\n    const updatedModel = [...state.model];\n    const positionsYetToFill = findAllKeys(state.positionsToFill, (_k, v) => v > 0);\n    if (positionsYetToFill.length < 1) {\n      throw new Error();\n    }\n\n    const newBallPosition = positionsYetToFill[0];\n    updatedModel[newBallPosition] = state.positionsToFill[newBallPosition];\n\n    if (positionsYetToFill.length > 1) {\n      return {\n        ...state,\n        model: updatedModel,\n        positionsToFill: {\n          ...state.positionsToFill,\n          [newBallPosition]: -1,\n        },\n      };\n    } else {\n      const fullLines = Object.keys(state.positionsToFill)\n        .map(k => Number(k))\n        .map(position => findFullLine(updatedModel, state.size, state.lineLength, position));\n      if (fullLines.some(line => line !== null)) {\n        const allBallsToRemove = fullLines.flatMap(line => (line === null ? [] : line));\n        return {\n          ...state,\n          model: updatedModel,\n          nextColors: chooseNextColors(state.colorsCount),\n          score: state.score + calculateScore(allBallsToRemove.length, state),\n          type: StateType.Freeing,\n          ballsToRemove: allBallsToRemove,\n        };\n      } else {\n        const updatedState: WaitingState = {\n          ...state,\n          model: updatedModel,\n          nextColors: chooseNextColors(state.colorsCount),\n          type: StateType.Waiting,\n          selectedBall: -1,\n        };\n        if (updatedState.model.every(c => c > 0)) {\n          // game over\n          updatedState.prevStepScore = undefined;\n          updatedState.prevStepModel = undefined;\n          updatedState.prevStepNextColors = undefined;\n        }\n        return updatedState;\n      }\n    }\n  }\n  if (state.type === StateType.Freeing) {\n    const updatedModel = [...state.model];\n    state.ballsToRemove.forEach(position => {\n      updatedModel[position] = 0;\n    });\n    return {\n      ...state,\n      model: updatedModel,\n      type: StateType.Waiting,\n      selectedBall: -1,\n    };\n  }\n  throw new Error();\n}\n\nexport function calculateScore(lineLength: number, state: GameConditions): number {\n  const { size, colorsCount, showNextColors } = state;\n  const ballCost = Math.max(1, colorsCount - 5);\n  const bonus = 9 - size;\n  const cumulativeSum = lineLength * ballCost + bonus;\n  if (showNextColors) {\n    return cumulativeSum - Math.round(cumulativeSum / 3);\n  }\n  return cumulativeSum;\n}\n","export default function findPath(\n  fromPosition: number,\n  toPosition: number,\n  model: number[],\n  size: number,\n): number[] | null {\n  if (fromPosition === toPosition) {\n    return [];\n  }\n  if (model[toPosition] > 0) {\n    return null;\n  }\n\n  const positionsToCheck = [fromPosition];\n  const backWay: number[] = [];\n  backWay[fromPosition] = -1;\n  let nextToCheck = 0;\n  const visited: boolean[] = [];\n  visited[fromPosition] = true;\n\n  while (nextToCheck < positionsToCheck.length) {\n    let startingPosition = positionsToCheck[nextToCheck];\n    if (startingPosition === toPosition) {\n      const path = [toPosition];\n      let prevPositionOnPath = backWay[toPosition];\n      while (prevPositionOnPath !== fromPosition) {\n        path.push(prevPositionOnPath);\n        prevPositionOnPath = backWay[prevPositionOnPath];\n      }\n      return path.reverse();\n    }\n    let candidate = startingPosition - size; // upper cell\n    if (candidate >= 0 && model[candidate] === 0 && !visited[candidate]) {\n      // upper cell exists, is empty & not visited\n      positionsToCheck.push(candidate);\n      visited[candidate] = true;\n      backWay[candidate] = startingPosition;\n    }\n    candidate = startingPosition + size; // lower cell\n    if (candidate < model.length && model[candidate] === 0 && !visited[candidate]) {\n      positionsToCheck.push(candidate);\n      visited[candidate] = true;\n      backWay[candidate] = startingPosition;\n    }\n    candidate = startingPosition - 1; // left cell\n    if (startingPosition % size !== 0 && model[candidate] === 0 && !visited[candidate]) {\n      positionsToCheck.push(candidate);\n      visited[candidate] = true;\n      backWay[candidate] = startingPosition;\n    }\n    candidate = startingPosition + 1; // right cell\n    if (startingPosition % size !== size - 1 && model[candidate] === 0 && !visited[candidate]) {\n      positionsToCheck.push(candidate);\n      visited[candidate] = true;\n      backWay[candidate] = startingPosition;\n    }\n    nextToCheck++;\n  }\n\n  return null;\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport './ColoredCell.scss';\n\ninterface Props {\n  value: number; // 0 - empty, 1,2,... - color\n  selected?: boolean;\n  moveTo?: Direction;\n  fillNewValue?: number;\n  disappearing?: boolean;\n}\n\nexport enum Direction {\n  up = 'Up',\n  down = 'Down',\n  left = 'Left',\n  right = 'Right',\n}\n\nexport const ColoredCell: React.FC<Props> = ({\n  value,\n  selected,\n  moveTo,\n  fillNewValue,\n  disappearing,\n}: Props) => {\n  function renderContent() {\n    if (!value && !fillNewValue) {\n      return null;\n    }\n    const color = value || fillNewValue;\n\n    const className = classNames('ColoredCell-circle', `ColoredCell-circle--${color}`, {\n      'ColoredCell-circle--selected': selected,\n      'ColoredCell-circle--moving': !!moveTo,\n      [`ColoredCell-circle--moving${moveTo}`]: !!moveTo,\n      'ColoredCell-circle--appearing': !!fillNewValue,\n      'ColoredCell-circle--disappearing': disappearing,\n    });\n\n    return <div className={className} />;\n  }\n\n  return <div className=\"ColoredCell\">{renderContent()}</div>;\n};\n","import React, { useCallback, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { debounce } from 'utils/helpers';\nimport { ColoredCell, Direction } from './ColoredCell';\nimport './BoardCell.scss';\n\ninterface Props {\n  x: number;\n  y: number;\n  position: number;\n  value: number; // 0 - empty, 1,2,... - color\n  selected: boolean;\n  disabled?: boolean;\n  moveTo?: Direction;\n  fillNewValue?: number;\n  disappearing?: boolean;\n  onClick: (position: number) => void;\n  onAnimationFinished: () => void;\n}\n\nexport const BoardCell: React.FC<Props> = ({\n  x,\n  y,\n  position,\n  value,\n  selected,\n  disabled,\n  moveTo,\n  fillNewValue,\n  disappearing,\n  onClick,\n  onAnimationFinished,\n}) => {\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (moveTo || fillNewValue || disappearing) {\n      const timeout = setTimeout(() => {\n        onAnimationFinished();\n      }, 150);\n      return () => {\n        clearTimeout(timeout);\n      };\n    }\n  }, [moveTo, fillNewValue, disappearing, onAnimationFinished]);\n\n  const cellClicked = useCallback(\n    debounce(() => {\n      onClick(position);\n    }),\n    [onClick, position],\n  );\n\n  const coords = `(${x}, ${y})`;\n  const coordsLabel = t('board.cell_label', { coords });\n  const contentLabel = value ? t('board.cell_color', { value }) : t('board.cell_empty');\n\n  return (\n    <button\n      type=\"button\"\n      className=\"BoardCell\"\n      onClick={cellClicked}\n      disabled={disabled}\n      aria-label={`${coordsLabel}${contentLabel}`}\n    >\n      <ColoredCell\n        value={value}\n        selected={selected}\n        moveTo={moveTo}\n        fillNewValue={fillNewValue}\n        disappearing={disappearing}\n      />\n    </button>\n  );\n};\n","import React, { useCallback, useEffect } from 'react';\n\nimport { State, StateType, BoardAction, boardClicked, animationFinished } from 'model/state';\nimport { delay, findKey, range } from 'utils/helpers';\nimport { BoardCell } from './BoardCell';\nimport { Direction } from './ColoredCell';\n\nimport './Board.scss';\n\ninterface Props {\n  state: State;\n  dispatch: (action: BoardAction) => void;\n  onGameOver: () => void;\n}\n\nexport const Board: React.FC<Props> = ({ state, dispatch, onGameOver }: Props) => {\n  const { size, model } = state;\n\n  useEffect(() => {\n    const isGameOver = state.type === StateType.Waiting && state.model.every((c: number) => c > 0);\n    if (isGameOver) {\n      onGameOver();\n    }\n  }, [state.type, state.model, onGameOver]);\n\n  let selectedBall = -1,\n    isAnimating = false,\n    nextPathPosition = -1,\n    isLastMove = false,\n    nextPositionToAddBall = -1,\n    newBallColor = 0,\n    ballsToRemove = [] as number[];\n\n  if (state.type === StateType.Waiting) {\n    selectedBall = state.selectedBall;\n  }\n  if (state.type === StateType.Moving) {\n    selectedBall = state.selectedBall;\n    isAnimating = true;\n    nextPathPosition = state.remainingPath[0];\n    isLastMove = state.remainingPath.length === 1;\n  }\n  if (state.type === StateType.Adding) {\n    isAnimating = true;\n    nextPositionToAddBall = findKey(state.positionsToFill, (k, v) => v > 0, -1);\n    newBallColor = state.positionsToFill[nextPositionToAddBall];\n  }\n  if (state.type === StateType.Freeing) {\n    isAnimating = true;\n    ballsToRemove = state.ballsToRemove;\n  }\n\n  const handleBoardClicked = useCallback(\n    (position: number) => {\n      if (isAnimating) {\n        return;\n      }\n      dispatch(boardClicked(position));\n    },\n    [dispatch, isAnimating],\n  );\n\n  const handleAnimationFinished = useCallback(async () => {\n    if (isLastMove) {\n      await delay(100);\n    }\n    dispatch(animationFinished());\n  }, [dispatch, isLastMove]);\n\n  return (\n    <div className=\"Board\">\n      {range(size).map(x => {\n        return (\n          <div key={x} className=\"Board-row\">\n            {range(size).map(y => {\n              const position = x * size + y;\n              const value = model[position];\n              const isSelected = selectedBall === position;\n              const isAddingNewBall = nextPositionToAddBall === position;\n              const isDisappearing = ballsToRemove.includes(position);\n              return (\n                <BoardCell\n                  key={y}\n                  x={x}\n                  y={y}\n                  position={position}\n                  value={value}\n                  selected={isSelected}\n                  disabled={isAnimating}\n                  moveTo={\n                    isSelected && isAnimating\n                      ? getAnimationDirection(position, nextPathPosition, size)\n                      : undefined\n                  }\n                  fillNewValue={isAddingNewBall ? newBallColor : undefined}\n                  disappearing={isDisappearing}\n                  onClick={handleBoardClicked}\n                  onAnimationFinished={handleAnimationFinished}\n                />\n              );\n            })}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nfunction getAnimationDirection(position: number, nextPosition: number, size: number) {\n  if (nextPosition === position - size) {\n    return Direction.up;\n  }\n  if (nextPosition === position + size) {\n    return Direction.down;\n  }\n  if (nextPosition === position - 1) {\n    return Direction.left;\n  }\n  return Direction.right;\n}\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { ColoredCell } from './ColoredCell';\n\nimport './NextColors.scss';\n\ninterface Props {\n  nextColors: number[];\n}\n\nexport const NextColors: React.FC<Props> = ({ nextColors }: Props) => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"NextColors\">\n      <h2>{t('app.next_colors')}</h2>\n      <div className=\"NextColors-row\">\n        {nextColors.map((value, index) => {\n          return (\n            <div key={index} className=\"NextColors-cell\">\n              <ColoredCell value={value} />\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport classNames from 'classnames';\n\nimport './Modal.scss';\n\ninterface Props {\n  open: boolean;\n  onRequestClose: () => void;\n  title?: string;\n  priority?: 'top' | 'default';\n  focusElement?: HTMLElement | null;\n}\n\nexport const Modal: React.FC<Props> = ({\n  open,\n  onRequestClose,\n  title,\n  priority = 'default',\n  children,\n  focusElement = null,\n}) => {\n  const contentRef = useRef<HTMLDivElement>(null);\n  const [lastActiveElement, setLastActiveElement] = useState<HTMLElement | null>(null);\n\n  useEffect(() => {\n    if (open) {\n      setLastActiveElement(document.activeElement as HTMLElement);\n    } else {\n      if (lastActiveElement) {\n        attemptFocus(lastActiveElement);\n        setLastActiveElement(null);\n      }\n    }\n  }, [open, setLastActiveElement, lastActiveElement]);\n\n  useEffect(() => {\n    function focusFirstDescendant(element: HTMLElement) {\n      if (contentRef.current) {\n        for (let i = 0; i < element.childNodes.length; i++) {\n          const child = element.childNodes[i] as HTMLElement;\n          if (attemptFocus(child) || focusFirstDescendant(child)) {\n            return true;\n          }\n        }\n      }\n    }\n    if (lastActiveElement) {\n      if (focusElement && attemptFocus(focusElement)) {\n        return;\n      } else if (contentRef.current) {\n        focusFirstDescendant(contentRef.current);\n      }\n    }\n  }, [lastActiveElement, focusElement]);\n\n  useEffect(() => {\n    function handleEscape(event: KeyboardEvent) {\n      if (event.code === 'Escape') {\n        event.stopPropagation();\n        onRequestClose();\n      }\n    }\n    document.addEventListener('keyup', handleEscape);\n\n    return () => {\n      document.removeEventListener('keyup', handleEscape);\n    };\n  }, [onRequestClose]);\n\n  function attemptFocus(element: HTMLElement) {\n    try {\n      element.focus();\n    } catch (e) {}\n    return document.activeElement === element;\n  }\n\n  function renderModal() {\n    return (\n      <div className={classNames('Modal-backdrop', `Modal-backdrop--${priority}Priority`, { 'Modal-backdrop--active': open })}>\n        <div\n          className={classNames('Modal', { 'Modal--hidden': !open })}\n          role=\"dialog\"\n          aria-describedby={title || 'modal'}\n          aria-modal=\"true\"\n        >\n          {!!title && <h2>{title}</h2>}\n          <div className=\"Modal-content\" ref={contentRef}>\n            {children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n  const modalRoot = document.getElementById('modal-root') as HTMLElement;\n  return ReactDOM.createPortal(renderModal(), modalRoot);\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  clipRule: \"evenodd\",\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z\"\n});\n\nvar SvgIcBuild = function SvgIcBuild(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcBuild, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ic_build.c8bb14ce.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"\n});\n\nvar SvgIcHelp = function SvgIcHelp(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcHelp, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ic_help.fc644990.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Bounding_Box\"\n}, React.createElement(\"rect\", {\n  fill: \"none\",\n  width: 24,\n  height: 24\n}));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Flat\"\n}, React.createElement(\"g\", {\n  id: \"ui_x5F_spec_x5F_header_copy_2\"\n}), React.createElement(\"path\", {\n  d: \"M19,5h-2V3H7v2H5C3.9,5,3,5.9,3,7v1c0,2.55,1.92,4.63,4.39,4.94c0.63,1.5,1.98,2.63,3.61,2.96V19H7v2h10v-2h-4v-3.1 c1.63-0.33,2.98-1.46,3.61-2.96C19.08,12.63,21,10.55,21,8V7C21,5.9,20.1,5,19,5z M7,10.82C5.84,10.4,5,9.3,5,8V7h2V10.82z M19,8 c0,1.3-0.84,2.4-2,2.82V7h2V8z\"\n}));\n\nvar SvgIcLeaderboard = function SvgIcLeaderboard(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    enableBackground: \"new 0 0 24 24\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcLeaderboard, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ic_leaderboard.5a52516f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"\n});\n\nvar SvgIcMenu = function SvgIcMenu(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcMenu, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ic_menu.c275e518.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\"\n});\n\nvar SvgIcOpen = function SvgIcOpen(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcOpen, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ic_open.dbafa2b2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgIcRefresh = function SvgIcRefresh(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcRefresh, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ic_refresh.fbf012c9.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"\n});\n\nvar SvgIcSave = function SvgIcSave(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcSave, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ic_save.1731195f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z\"\n});\n\nvar SvgIcSettings = function SvgIcSettings(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcSettings, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ic_settings.61955d84.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"\n});\n\nvar SvgIcUndo = function SvgIcUndo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgIcUndo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ic_undo.42f85826.svg\";\nexport { ForwardRef as ReactComponent };","import { ReactComponent as build } from './ic_build.svg';\nimport { ReactComponent as help } from './ic_help.svg';\nimport { ReactComponent as leaderboard } from './ic_leaderboard.svg';\nimport { ReactComponent as menu } from './ic_menu.svg';\nimport { ReactComponent as open } from './ic_open.svg';\nimport { ReactComponent as refresh } from './ic_refresh.svg';\nimport { ReactComponent as save } from './ic_save.svg';\nimport { ReactComponent as settings } from './ic_settings.svg';\nimport { ReactComponent as undo } from './ic_undo.svg';\n\nexport const icons = { build, help, leaderboard, menu, open, refresh, save, settings, undo };\n","import React from 'react';\nimport { icons } from './icons/icons';\n\nexport type IconGlyph = keyof typeof icons;\n\ninterface Props extends React.SVGProps<SVGSVGElement> {\n  glyph: IconGlyph;\n}\n\nexport const Icon: React.FC<Props> = ({ glyph, ...props }) => {\n  const IconComponent = icons[glyph];\n  return <IconComponent {...props} />;\n};\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport './Button.scss';\nimport { Icon, IconGlyph } from './Icon';\n\nexport type ButtonVariant = 'primary' | 'default';\n\ninterface Props {\n  ref?: React.RefObject<HTMLButtonElement>;\n  children?: never;\n  label: string;\n  hideLabel?: boolean;\n  icon?: IconGlyph;\n  variant?: ButtonVariant;\n  disabled?: boolean;\n  tabIndex?: number;\n  onClick?: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n}\n\nexport const Button = React.forwardRef<HTMLButtonElement, Props>(\n  ({ label, hideLabel, icon, variant = 'default', disabled, tabIndex, onClick }, ref) => {\n    return (\n      <button\n        ref={ref}\n        type=\"button\"\n        className={classNames('Button', `Button--${variant}`, { 'Button--disabled': disabled, 'Button--icon-only': !!hideLabel })}\n        onClick={onClick}\n        disabled={disabled}\n        tabIndex={tabIndex}\n        title={label}\n        aria-label={label}\n      >\n        {!!icon && <Icon glyph={icon} />}\n        {!hideLabel && <span>{label}</span>}\n      </button>\n    );\n  },\n);\n","import React, { ChangeEvent, useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Modal } from '../_ui/Modal';\nimport { Button } from '../_ui/Button';\nimport { isInTopScores, putScore } from 'utils/storage';\n\nimport './GameOverModal.scss';\n\nexport type CloseBehavior = 'new_game' | 'show_leaderboard' | 'quit';\n\ninterface Props {\n  score: number;\n  open: boolean;\n  onRequestClose: (behavior?: CloseBehavior) => void;\n}\n\nexport const GameOverModal: React.FC<Props> = ({ score, open, onRequestClose }) => {\n  const { t } = useTranslation();\n  const [isTopScore, setIsTopScore] = useState<boolean>(false);\n  const [playerName, setPlayerName] = useState<string>('');\n\n  useEffect(() => {\n    if (open) {\n      checkIfTopScore(score);\n    }\n  }, [score, open]);\n\n  async function checkIfTopScore(score: number) {\n    const isTop = await isInTopScores(score);\n    setIsTopScore(isTop);\n  }\n\n  const handleInputChange = useCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      setPlayerName(e.target.value);\n    },\n    [setPlayerName],\n  );\n\n  const handleSave = useCallback(async () => {\n    await putScore(playerName, score);\n    onRequestClose('show_leaderboard');\n  }, [playerName, score, onRequestClose]);\n\n  const handleRequestNewGame = useCallback(() => {\n    onRequestClose('new_game');\n  }, [onRequestClose]);\n\n  const handleClose = useCallback(() => {\n    onRequestClose();\n  }, [onRequestClose]);\n\n  function renderContent() {\n    if (isTopScore) {\n      return (\n        <div>\n          <p>{t('game_over.congratulations')}</p>\n          <div className=\"GameOverModal-inputWrapper\">\n            <label>\n              {t('game_over.name_label')}\n              <input type=\"text\" value={playerName} onChange={handleInputChange} />\n            </label>\n          </div>\n        </div>\n      );\n    }\n\n    return <p>{t('game_over.new_game_prompt')}</p>;\n  }\n\n  function renderButtons() {\n    if (isTopScore) {\n      return (\n        <div className=\"GameOverModal-buttons\">\n          <Button variant=\"primary\" label={t('global.save')} onClick={handleSave} />\n          <Button label={t('game_over.dont_save')} onClick={handleClose} />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"GameOverModal-buttons\">\n        <Button variant=\"primary\" label={t('global.yes')} onClick={handleRequestNewGame} />\n        <Button label={t('global.no')} onClick={handleClose} />\n      </div>\n    );\n  }\n\n  return (\n    <Modal open={open} onRequestClose={onRequestClose} title={t('game_over.modal_title')}>\n      <div className=\"GameOverModal\">\n        {renderContent()}\n        {renderButtons()}\n      </div>\n    </Modal>\n  );\n};\n","import React, { useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Modal } from 'components/_ui/Modal';\nimport { Button } from 'components/_ui/Button';\n\nimport './OkCancelModal.scss';\n\ninterface Props {\n  title: string;\n  okLabel?: string;\n  open: boolean;\n  onOk: () => void;\n  onCancel: () => void;\n  focusedButton?: 'ok' | 'cancel';\n  primaryButton?: 'ok' | 'cancel';\n}\n\nexport const OkCancelModal: React.FC<Props> = ({\n  title,\n  okLabel,\n  children,\n  open,\n  onOk,\n  onCancel,\n  focusedButton = 'ok',\n  primaryButton,\n}) => {\n  const { t } = useTranslation();\n  const okButtonRef = useRef<HTMLButtonElement>(null);\n  const cancelButtonRef = useRef<HTMLButtonElement>(null);\n\n  const focusedRef = focusedButton === 'cancel' ? cancelButtonRef : okButtonRef;\n\n  return (\n    <Modal\n      priority=\"top\"\n      open={open}\n      onRequestClose={onCancel}\n      title={title}\n      focusElement={focusedRef.current}\n    >\n      <div className=\"OkCancelModal\">\n        <div className=\"OkCancelModal-content\">{children}</div>\n        <div className=\"OkCancelModal-buttons\">\n          <Button\n            ref={cancelButtonRef}\n            label={t('global.cancel')}\n            variant={primaryButton === 'cancel' ? 'primary' : undefined}\n            onClick={onCancel}\n          />\n          <Button\n            ref={okButtonRef}\n            label={okLabel || t('global.ok')}\n            variant={primaryButton === 'ok' ? 'primary' : undefined}\n            onClick={onOk}\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Score, loadTopScoresDescending, clearAllScores } from 'utils/storage';\nimport { Modal } from '../_ui/Modal';\nimport { Button } from '../_ui/Button';\n\nimport './LeaderboardModal.scss';\nimport { OkCancelModal } from '../_ui/OkCancelModal';\n\nexport type CloseBehavior = 'new_game' | 'show_leaderboard' | 'quit';\n\ninterface Props {\n  open: boolean;\n  onRequestClose: (behavior?: CloseBehavior) => void;\n}\n\nexport const LeaderboardModal: React.FC<Props> = ({ open, onRequestClose }) => {\n  const { t } = useTranslation();\n  const [scores, setScores] = useState<Score[]>([]);\n  const [isConfirmationOpen, setConfirmationOpen] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (open) {\n      loadScores();\n    }\n  }, [open]);\n\n  async function loadScores() {\n    const allScores = await loadTopScoresDescending();\n    setScores(allScores);\n  }\n\n  const clearScoresRequested = useCallback(() => {\n    setConfirmationOpen(true);\n  }, [setConfirmationOpen]);\n\n  const clearScoresConfirmed = useCallback(async () => {\n    await clearAllScores();\n    await loadScores();\n  }, []);\n\n  const handleConfirmationCancelled = useCallback(() => {\n    setConfirmationOpen(false);\n  }, [setConfirmationOpen]);\n\n  const handleRequestClose = useCallback(() => {\n    setConfirmationOpen(false);\n    onRequestClose();\n  }, [setConfirmationOpen, onRequestClose]);\n\n  return (\n    <Modal open={open} onRequestClose={handleRequestClose} title={t('leaderboard.modal_title')}>\n      <div className=\"LeaderboardModal\">\n        <div className=\"LeaderboardModal-tableWrapper\">\n          <table>\n            <thead>\n              <tr>\n                <th>{t('leaderboard.th_player')}</th>\n                <th>{t('leaderboard.th_score')}</th>\n                <th>{t('leaderboard.th_date')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {scores.map(({ playerName, score, timestamp }) => (\n                <tr key={timestamp}>\n                  <td>{playerName}</td>\n                  <td>{score}</td>\n                  <td>{new Date(timestamp).toLocaleString()}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        <div className=\"LeaderboardModal-buttons\">\n          <Button label={t('leaderboard.close')} variant=\"primary\" onClick={handleRequestClose} />\n          <Button label={t('leaderboard.clear')} onClick={clearScoresRequested} />\n        </div>\n        <OkCancelModal\n          title={t('leaderboard.clear_scores_title')}\n          okLabel={t('global.yes')}\n          open={isConfirmationOpen}\n          onOk={clearScoresConfirmed}\n          onCancel={handleConfirmationCancelled}\n          focusedButton=\"cancel\"\n        >\n          {t('leaderboard.clear_scores_message')}\n        </OkCancelModal>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Button } from 'components/_ui/Button';\nimport { LeaderboardModal } from './LeaderboardModal';\n\ninterface Props {\n  showModal: boolean;\n}\n\nexport const LeaderboardSection: React.FC<Props> = ({ showModal }) => {\n  const { t } = useTranslation();\n  const [isModalOpen, setModalOpen] = useState<boolean>(showModal);\n\n  useEffect(() => {\n    setModalOpen(showModal);\n  }, [showModal]);\n\n  const handleRequestShowRanking = useCallback(() => {\n    setModalOpen(true);\n  }, [setModalOpen]);\n\n  const handleRankingClosed = useCallback(() => {\n    setModalOpen(false);\n  }, [setModalOpen]);\n\n  return (\n    <>\n      <Button\n        icon=\"leaderboard\"\n        label={t('app.show_leaderboard')}\n        hideLabel\n        onClick={handleRequestShowRanking}\n      />\n      <LeaderboardModal open={isModalOpen} onRequestClose={handleRankingClosed} />\n    </>\n  );\n};\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport './SegmentedControl.scss';\n\ninterface Option<T> {\n  value: T;\n  label: string;\n}\n\ninterface Props<T> {\n  vertical?: boolean;\n  options: (Option<T> | T)[];\n  value?: T;\n  onChange: (value: T) => void;\n}\n\nexport class SegmentedControl<T extends string | number | boolean> extends React.PureComponent<\n  Props<T>\n> {\n  render() {\n    const { vertical, options, value: selectedValue, onChange } = this.props;\n    return (\n      <div className={classNames('SegmentedControl', { 'SegmentedControl--vertical': vertical })}>\n        {options.map(sanitizeOption).map(option => (\n          <SegmentedControlButton\n            key={option.value.toString()}\n            label={option.label}\n            value={option.value}\n            selected={option.value === selectedValue}\n            onSelect={onChange}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n\nfunction sanitizeOption<T extends string | number | boolean>(option: Option<T> | T): Option<T> {\n  if (typeof option === 'object') {\n    return option;\n  }\n  return {\n    value: option,\n    label: option.toString(),\n  };\n}\n\ninterface ButtonProps<T> {\n  label: string;\n  value: T;\n  selected?: boolean;\n  onSelect: (value: T) => void;\n}\n\nclass SegmentedControlButton<T> extends React.PureComponent<ButtonProps<T>> {\n  buttonClicked = () => {\n    this.props.onSelect(this.props.value);\n  };\n\n  render() {\n    const { label, selected } = this.props;\n    return (\n      <button\n        type=\"button\"\n        className={classNames('SegmentedControl-button', {\n          'SegmentedControl-button--selected': selected,\n        })}\n        onClick={this.buttonClicked}\n      >\n        {label}\n      </button>\n    );\n  }\n}\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useTranslation, Trans } from 'react-i18next';\n\nimport { GameConditions } from 'model/state';\nimport {\n  DEFAULT_BOARD_SIZE,\n  DEFAULT_LINE_LENGTH,\n  MAX_COLORS_COUNT,\n  MIN_COLORS_COUNT,\n} from 'utils/constants';\nimport { range } from 'utils/helpers';\nimport { calculateScore } from 'hooks/model/useModel';\nimport { Modal } from 'components/_ui/Modal';\nimport { Button } from 'components/_ui/Button';\nimport { SegmentedControl } from 'components/_ui/SegmentedControl';\n\nimport './OptionsModal.scss';\n\ninterface Props {\n  open: boolean;\n  initialValue: GameConditions;\n  onSubmit: (value: GameConditions) => void;\n  onCancel: () => void;\n}\n\nconst colorsOptions = range(MAX_COLORS_COUNT + 1, MIN_COLORS_COUNT);\nconst sizesOptions = range(DEFAULT_BOARD_SIZE + 3, DEFAULT_LINE_LENGTH);\n\nexport const OptionsModal: React.FC<Props> = ({ open, initialValue, onSubmit, onCancel }) => {\n  const { t } = useTranslation();\n  const [showNextColors, setShowNextColors] = useState<boolean>(initialValue.showNextColors);\n  const [colorsCount, setColorsCount] = useState<number>(initialValue.colorsCount);\n  const [size, setSize] = useState<number>(initialValue.size);\n\n  const switchOptions = useMemo(\n    () => [{ value: false, label: t('options.hide') }, { value: true, label: t('options.show') }],\n    [t],\n  );\n\n  useEffect(() => {\n    if (open) {\n      setShowNextColors(initialValue.showNextColors);\n      setColorsCount(initialValue.colorsCount);\n      setSize(initialValue.size);\n    }\n  }, [open, initialValue]);\n\n  const handleSwitchChange = useCallback(\n    (value: boolean) => {\n      setShowNextColors(value);\n    },\n    [setShowNextColors],\n  );\n\n  const handleColorsCountChange = useCallback(\n    (value: number) => {\n      setColorsCount(value);\n    },\n    [setColorsCount],\n  );\n\n  const handleSizeChange = useCallback(\n    (value: number) => {\n      setSize(value);\n    },\n    [setSize],\n  );\n\n  const handleSubmit = useCallback(async () => {\n    onSubmit({ size, showNextColors, colorsCount });\n  }, [size, showNextColors, colorsCount, onSubmit]);\n\n  const estimatedScore = calculateScore(DEFAULT_LINE_LENGTH, { size, showNextColors, colorsCount });\n  return (\n    <Modal open={open} onRequestClose={onCancel} title={t('options.modal_title')}>\n      <div className=\"OptionsModal\">\n        <p>{t('options.info')}</p>\n        <h4>{t('options.show_next_colors')}</h4>\n        <SegmentedControl\n          options={switchOptions}\n          value={showNextColors}\n          onChange={handleSwitchChange}\n        />\n\n        <h4>{t('options.number_of_colors')}</h4>\n        <SegmentedControl\n          options={colorsOptions}\n          value={colorsCount}\n          onChange={handleColorsCountChange}\n        />\n\n        <h4>{t('options.board_size')}</h4>\n        <SegmentedControl options={sizesOptions} value={size} onChange={handleSizeChange} />\n\n        <Trans i18nKey=\"options.summary\" parent=\"p\">\n          With these settings, for <strong>{{ lineLength: DEFAULT_LINE_LENGTH }}-cell-long</strong>{' '}\n          row you will earn <strong>{{ estimatedScore }}</strong> points.\n        </Trans>\n      </div>\n      <div className=\"OptionsModal-buttons\">\n        <Button label={t('global.cancel')} onClick={onCancel} />\n        <Button label={t('global.save')} variant=\"primary\" onClick={handleSubmit} />\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { GameConditions } from 'model/state';\nimport { Button } from 'components/_ui/Button';\nimport { OptionsModal } from './OptionsModal';\n\ninterface Props {\n  value: GameConditions;\n  onChange: (newOptions: GameConditions) => void;\n}\n\nexport const OptionsSection: React.FC<Props> = ({ value, onChange }) => {\n  const { t } = useTranslation();\n  const [showOptions, setShowOptions] = useState<boolean>(false);\n\n  const handleRequestShowOptions = useCallback(() => {\n    setShowOptions(true);\n  }, [setShowOptions]);\n\n  const handleOptionsClosed = useCallback(() => {\n    setShowOptions(false);\n  }, [setShowOptions]);\n\n  const handleOptionsSubmitted = useCallback(\n    async (options: GameConditions) => {\n      setShowOptions(false);\n      onChange(options);\n    },\n    [setShowOptions, onChange],\n  );\n\n  return (\n    <>\n      <Button\n        icon=\"build\"\n        label={t('app.show_options')}\n        hideLabel\n        onClick={handleRequestShowOptions}\n      />\n      <OptionsModal\n        open={showOptions}\n        initialValue={value}\n        onSubmit={handleOptionsSubmitted}\n        onCancel={handleOptionsClosed}\n      />\n    </>\n  );\n};\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Modal } from 'components/_ui/Modal';\nimport { Button } from 'components/_ui/Button';\n\nimport './TutorialModal.scss';\n\ninterface Props {\n  open: boolean;\n  onRequestClose: () => void;\n}\n\nexport const TutorialModal: React.FC<Props> = ({ open, onRequestClose }) => {\n  const { t } = useTranslation();\n\n  return (\n    <Modal open={open} onRequestClose={onRequestClose} title={t('tutorial.modal_title')}>\n      <div className=\"TutorialModal\">\n        <p>{t('tutorial.info')}</p>\n        <p>{t('tutorial.moving_balls')}</p>\n        <p>{t('tutorial.scoring')}</p>\n        <p>{t('tutorial.score_rules')}</p>\n        <p>{t('tutorial.game_over')}</p>\n      </div>\n      <div className=\"TutorialModal-buttons\">\n        <Button label={t('global.ok')} onClick={onRequestClose} />\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Button } from 'components/_ui/Button';\nimport { TutorialModal } from './TutorialModal';\n\nexport const TutorialSection: React.FC<{}> = () => {\n  const { t } = useTranslation();\n  const [showModal, setShowModal] = useState<boolean>(false);\n\n  const handleRequestShowTutorial = useCallback(() => {\n    setShowModal(true);\n  }, [setShowModal]);\n\n  const handleModalClosed = useCallback(() => {\n    setShowModal(false);\n  }, [setShowModal]);\n\n  return (\n    <>\n      <Button\n        icon=\"help\"\n        label={t('app.show_help')}\n        hideLabel\n        onClick={handleRequestShowTutorial}\n      />\n      <TutorialModal open={showModal} onRequestClose={handleModalClosed} />\n    </>\n  );\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { BaseState } from 'model/state';\nimport { loadSavedGamesNames, loadGame } from 'utils/storage';\nimport { Modal } from 'components/_ui/Modal';\nimport { Button } from 'components/_ui/Button';\nimport { SegmentedControl } from 'components/_ui/SegmentedControl';\n\nimport './LoadGameModal.scss';\n\ninterface Props {\n  open: boolean;\n  onRequestClose: () => void;\n  onGameLoaded: (gameState: BaseState) => void;\n}\n\nexport const LoadGameModal: React.FC<Props> = ({ open, onGameLoaded, onRequestClose }) => {\n  const { t } = useTranslation();\n  const [savedGames, setSavedGames] = useState<string[]>([]);\n\n  useEffect(() => {\n    const loadData = async () => {\n      const games = await loadSavedGamesNames();\n      setSavedGames(games);\n    };\n\n    if (open) {\n      loadData();\n    }\n  }, [open]);\n\n  const handleGameChosen = useCallback(\n    async (name: string) => {\n      const gameState = await loadGame(name);\n      if (gameState) {\n        onGameLoaded(gameState);\n      }\n    },\n    [onGameLoaded],\n  );\n\n  return (\n    <Modal open={open} onRequestClose={onRequestClose} title={t('load_game.modal_title')}>\n      <div className=\"LoadGameModal\">\n        <div className=\"LoadGameModal-list\">\n          <SegmentedControl vertical options={savedGames} onChange={handleGameChosen} />\n        </div>\n        <div className=\"LoadGameModal-buttons\">\n          <Button label={t('global.cancel')} onClick={onRequestClose} />\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { BaseState } from 'model/state';\nimport { Button } from 'components/_ui/Button';\nimport { LoadGameModal } from './LoadGameModal';\n\ninterface Props {\n  onGameLoaded: (gameState: BaseState) => void;\n}\n\nexport const LoadGameSection: React.FC<Props> = ({ onGameLoaded }) => {\n  const { t } = useTranslation();\n  const [isModalOpen, setModalOpen] = useState<boolean>(false);\n\n  const openModal = useCallback(() => {\n    setModalOpen(true);\n  }, [setModalOpen]);\n\n  const closeModal = useCallback(() => {\n    setModalOpen(false);\n  }, [setModalOpen]);\n\n  const loadGame = useCallback(\n    (gameState: BaseState) => {\n      setModalOpen(false);\n      onGameLoaded(gameState);\n    },\n    [setModalOpen, onGameLoaded],\n  );\n\n  return (\n    <>\n      <Button icon=\"open\" label={t('app.load_game')} onClick={openModal} />\n      <LoadGameModal open={isModalOpen} onRequestClose={closeModal} onGameLoaded={loadGame} />\n    </>\n  );\n};\n","import React, { ChangeEvent, useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { BaseState } from 'model/state';\nimport { currentDateFormatted } from 'utils/helpers';\nimport { persistGame } from 'utils/storage';\nimport { Modal } from 'components/_ui/Modal';\nimport { Button } from 'components/_ui/Button';\n\nimport './SaveGameModal.scss';\n\ninterface Props {\n  gameState: BaseState;\n  open: boolean;\n  onRequestClose: () => void;\n}\n\nexport const SaveGameModal: React.FC<Props> = ({ gameState, open, onRequestClose }) => {\n  const { t } = useTranslation();\n  const [gameName, setGameName] = useState<string>(\n    t('save_game.initial_game_name', { date: currentDateFormatted() }),\n  );\n\n  const handleInputChange = useCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      setGameName(e.target.value);\n    },\n    [setGameName],\n  );\n\n  const handleSaveClick = useCallback(async () => {\n    await persistGame(gameName, gameState);\n    onRequestClose();\n  }, [gameName, gameState, onRequestClose]);\n\n  return (\n    <Modal open={open} onRequestClose={onRequestClose} title={t('save_game.modal_title')}>\n      <div className=\"SaveGameModal\">\n        <div className=\"SaveGameModal-inputWrapper\">\n          <label>\n            {t('save_game.input_label')}\n            <input type=\"text\" value={gameName} onChange={handleInputChange} />\n          </label>\n        </div>\n        <div className=\"SaveGameModal-buttons\">\n          <Button label={t('global.cancel')} onClick={onRequestClose} />\n          <Button label={t('global.save')} variant=\"primary\" onClick={handleSaveClick} />\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { BaseState } from 'model/state';\nimport { Button } from 'components/_ui/Button';\nimport { SaveGameModal } from './SaveGameModal';\n\ninterface Props {\n  gameState: BaseState;\n}\n\nexport const SaveGameSection: React.FC<Props> = ({ gameState }) => {\n  const { t } = useTranslation();\n  const [isModalOpen, setModalOpen] = useState<boolean>(false);\n\n  const openModal = useCallback(() => {\n    setModalOpen(true);\n  }, [setModalOpen]);\n\n  const closeModal = useCallback(() => {\n    setModalOpen(false);\n  }, [setModalOpen]);\n\n  return (\n    <>\n      <Button label={t('app.save_game')} icon=\"save\" onClick={openModal} />\n      <SaveGameModal gameState={gameState} open={isModalOpen} onRequestClose={closeModal} />\n    </>\n  );\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { persistLastInstallPromptDate, shouldShowInstallPrompt } from 'utils/storage';\nimport { OkCancelModal } from 'components/_ui/OkCancelModal';\n\ninterface BeforeInstallPromptEvent extends Event {\n  platforms: string[];\n  userChoice: Promise<'accepted' | 'dismissed'>;\n  prompt: () => Promise<void>;\n}\n\nexport const InstallPromptSection: React.FC = () => {\n  const { t } = useTranslation();\n  const [isModalOpen, setModalOpen] = useState<boolean>(false);\n  const [installPromptEvent, setInstallPromptEvent] = useState<BeforeInstallPromptEvent | null>(null);\n  const [shouldShowModal, setShouldShowModal] = useState<boolean>(false);\n\n  useEffect(() => {\n    async function checkConfig() {\n      const showPrompt = await shouldShowInstallPrompt();\n      setShouldShowModal(showPrompt);\n    }\n    checkConfig();\n  }, [setShouldShowModal]);\n\n  useEffect(() => {\n    function handleInstallPrompt(e: Event) {\n      setInstallPromptEvent(e as BeforeInstallPromptEvent);\n    }\n    window.addEventListener('beforeinstallprompt', handleInstallPrompt);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleInstallPrompt);\n    };\n  }, [setInstallPromptEvent]);\n\n  useEffect(() => {\n    if (shouldShowModal && !!installPromptEvent) {\n      setModalOpen(true);\n    }\n  }, [shouldShowModal, installPromptEvent]);\n\n  const handleCancel = useCallback(() => {\n    setModalOpen(false);\n    persistLastInstallPromptDate(Date.now());\n  }, [setModalOpen]);\n\n  const handleOk = useCallback(async () => {\n    if (installPromptEvent) {\n      installPromptEvent.prompt();\n      setModalOpen(false);\n    }\n  }, [installPromptEvent, setModalOpen]);\n\n  return (\n    <>\n      <OkCancelModal\n        title={t('install_prompt.modal_title')}\n        okLabel={t('install_prompt.ok_label')}\n        open={isModalOpen}\n        onOk={handleOk}\n        onCancel={handleCancel}\n        focusedButton=\"ok\"\n        primaryButton=\"ok\"\n      >\n        {t('install_prompt.prompt')}\n      </OkCancelModal>\n    </>\n  );\n};\n","import React, { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { SegmentedControl } from '../_ui/SegmentedControl';\n\nconst supportedLocales = ['en', 'pl'];\nconst options = supportedLocales.map(value => ({\n  label: value.toUpperCase(),\n  value,\n}));\n\nexport const LocaleChooser: React.FC = () => {\n  const { i18n } = useTranslation();\n\n  const changeLanguage = useCallback(\n    lng => {\n      i18n.changeLanguage(lng);\n    },\n    [i18n],\n  );\n\n  return (\n    <div className=\"LocaleChooser\">\n      <SegmentedControl options={options} value={i18n.language} onChange={changeLanguage} />\n    </div>\n  );\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport {\n  DEFAULT_BOARD_SIZE,\n  DEFAULT_COLORS_COUNT,\n  DEFAULT_SHOW_NEXT_COLORS,\n  INITIAL_BALLS_COUNT,\n  NEXT_BALLS_COUNT,\n} from './utils/constants';\nimport { loadCurrentGame, persistCurrentGame } from './utils/storage';\nimport { GameConditions, newGame, loadGame, BaseState, undo } from './model/state';\nimport { useModel } from 'hooks/model/useModel';\nimport { Board } from 'components/Board';\nimport { NextColors } from 'components/NextColors';\nimport { CloseBehavior, GameOverModal } from './components/game-over/GameOverModal';\nimport { LeaderboardSection } from './components/leaderboard/LeaderboardSection';\nimport { OptionsSection } from './components/options/OptionsSection';\nimport { TutorialSection } from './components/tutorial/TutorialSection';\nimport { LoadGameSection } from './components/load-game/LoadGameSection';\nimport { SaveGameSection } from './components/save-game/SaveGameSection';\nimport { InstallPromptSection } from './components/install-prompt/InstallPromptSection';\nimport { LocaleChooser } from './components/locale-chooser/LocaleChooser';\nimport { Button } from './components/_ui/Button';\n\nimport './App.scss';\n\nconst emptyNextColors = new Array(NEXT_BALLS_COUNT).fill(0);\n\nconst App: React.FC = () => {\n  const { t } = useTranslation();\n  const [state, dispatch] = useModel();\n  const [showGameOver, setShowGameOver] = useState<boolean>(false);\n  const [showLeaderboard, setShowLeaderboard] = useState<boolean>(false);\n\n  useEffect(() => {\n    const restoreCurrentGame = async () => {\n      const currentGame = await loadCurrentGame();\n      if (currentGame) {\n        if ((currentGame as BaseState).model) {\n          dispatch(loadGame(currentGame as BaseState));\n        } else {\n          dispatch(newGame(currentGame));\n        }\n      } else {\n        const defaultConditions: GameConditions = {\n          size: DEFAULT_BOARD_SIZE,\n          showNextColors: DEFAULT_SHOW_NEXT_COLORS,\n          colorsCount: DEFAULT_COLORS_COUNT,\n        };\n        dispatch(newGame(defaultConditions));\n      }\n    };\n    restoreCurrentGame();\n  }, [dispatch]);\n\n  useEffect(() => {\n    persistCurrentGame(state);\n  }, [state]);\n\n  const handleGameOver = useCallback(() => {\n    setShowGameOver(true);\n  }, [setShowGameOver]);\n\n  const handleGameOverModalClosed = useCallback(\n    (closeBehavior?: CloseBehavior) => {\n      setShowGameOver(false);\n      if (closeBehavior === 'new_game') {\n        dispatch(newGame());\n      } else if (closeBehavior === 'show_leaderboard') {\n        setShowLeaderboard(true);\n      }\n    },\n    [dispatch],\n  );\n\n  const handleNewGameClick = useCallback(() => {\n    dispatch(newGame());\n  }, [dispatch]);\n\n  const handleUndoClick = useCallback(() => {\n    dispatch(undo());\n  }, [dispatch]);\n\n  const handleOptionsSubmitted = useCallback(\n    (options: GameConditions) => {\n      dispatch(newGame(options));\n    },\n    [dispatch],\n  );\n\n  const handleGameLoadedFromStorage = useCallback(\n    (gameState: BaseState) => {\n      dispatch(loadGame(gameState));\n    },\n    [dispatch],\n  );\n\n  const isAddingFirstBalls = state.nextColors.length === INITIAL_BALLS_COUNT;\n  const nextColors =\n    !state.showNextColors || isAddingFirstBalls ? emptyNextColors : state.nextColors;\n\n  return (\n    <div className=\"App\">\n      <header>\n        <h1>{t('app.title')}</h1>\n        <div className=\"App-localeChooser\">\n          <LocaleChooser />\n        </div>\n      </header>\n\n      <nav>\n        <Button icon=\"refresh\" label={t('app.new_game')} onClick={handleNewGameClick} />\n        <LoadGameSection onGameLoaded={handleGameLoadedFromStorage} />\n        <SaveGameSection gameState={state} />\n        <Button\n          icon=\"undo\"\n          label={t('app.undo')}\n          disabled={!state.prevStepModel}\n          onClick={handleUndoClick}\n        />\n        <span style={{ flexGrow: 1 }} />\n        <LeaderboardSection showModal={showLeaderboard} />\n        <OptionsSection value={state} onChange={handleOptionsSubmitted} />\n        <TutorialSection />\n      </nav>\n\n      <main>\n        <aside>\n          <h2>\n            {t('app.score')} {state.score}\n          </h2>\n          <NextColors nextColors={nextColors} />\n        </aside>\n        <section>\n          <Board state={state} dispatch={dispatch} onGameOver={handleGameOver} />\n        </section>\n      </main>\n\n      <GameOverModal\n        score={state.score}\n        open={showGameOver}\n        onRequestClose={handleGameOverModalClosed}\n      />\n\n      <InstallPromptSection />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './locale/init';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\nimport './index.scss';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}